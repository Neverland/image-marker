!function(){var e=function(e){var t=arguments.callee,n=document,o=im.tk,r=this,a=6,i=null;return e=e||n.getElementsByTagName("body")[0],!r instanceof t?new t(e):(i={TL:{css:"top:0;left:0;cursor:nw-resize",size:function(e,t){i.CL.size(e,t),i.TC.size(e,t)}},TC:{css:"top:0;left:48%;cursor:n-resize",size:function(e,t){t.hanlderInfo&&(t.correctY(t.hanlderInfo._down-e.clientY,t.hanlderInfo._mxTH,t),t.correctTop(t))}},TR:{css:"right:0;top:0;cursor:ne-resize",size:function(e,t){i.CR.size(e,t),i.TC.size(e,t)}},CL:{css:"top:48%;left:0;cursor:w-resize",size:function(e,t){t.hanlderInfo&&(t.correctX(t.hanlderInfo._right-e.clientX,t.hanlderInfo._mxLW,t),t.correctLeft(t))}},CR:{css:"top:48%;right:0px;cursor:e-resize",size:function(e,t){t.hanlderInfo&&t.correctX(e.clientX-t.hanlderInfo._left,t.hanlderInfo._mxRW,t)}},BL:{css:"bottom:0;left:0;cursor:sw-resize",size:function(e,t){i.CL.size(e,t),i.BC.size(e,t)}},BC:{css:"bottom:0;left:48%;cursor:s-resize",size:function(e,t){t.hanlderInfo&&t.correctY(e.clientY-t.hanlderInfo._top,t.hanlderInfo._mxDH,t)}},BR:{css:"bottom:0;right:0px;cursor:se-resize",size:function(e,t){i.CR.size(e,t),i.BC.size(e,t)}}},r.area=null,t.prototype.constructor=t,t.fn=t.prototype,t.fn.constructor=t,t.fn.activity=function(t,n){var a=null,l=[];"function"==typeof n&&(r.fn=n),r.data&&(r.Data=null),null===r.area&&(r.info=o.getHtmlElement("span"),r.area=o.getHtmlElement("div"),r.area.style.visibility="hidden",r.area.className="Area",r.area.appendChild(r.info),e.appendChild(r.area),l=["TL","TC","TR","CL","CR","BL","BC","BR"],o.each(Array(8),function(e){a=o.getHtmlElement("b"),a.className=l[e],a.fn=i[l[e]],o.addEvent(a,"mousedown",function(e){r.mousemoveCheckThreshold(e,r)},!1),r.area.appendChild(a),r.setHanldPosition(a,r.area,l[e])}),o.addEvent(r.area,"mousedown",function(e){r.mousemoveCheckThreshold(e,r)},!1),r.area.style.visibility="visible");var s=r.area.parentNode;r.area.style.cssText="width:"+t.width+"px;height:"+t.height+"px;top:"+(s.scrollTop+t.top)+"px;left:"+(s.scrollLeft+t.left)+"px",r.fn&&r.fn()},t.fn.setHanldPosition=function(e,t,n){var o=t.offsetWidth;t.offsetHeight,Math.floor((o-a)/2),Math.floor((o-a)/2),e.style.cssText=i[n].css},t.fn.mousemoveCheckThreshold=function(e,t){e=o.getEvent(e);for(var r=o.getTarget(e),a=(e.type,function(e){t.mousemoveCheckThreshold(e,t)});r&&r.nodeType!==1;)r=r.parentNode;({mousedown:function(e){e=o.getEvent(e),o.stopEvent(e),n.currentTarget=r,t.pos=o.getClinetRect(r),t.origin=[e.clientX-t.pos.left,e.clientY-t.pos.top],r.nodeName.toLowerCase()==="b"&&t.checkHandler(e,t),o.addEvent(n,"mouseup",a,!1),o.addEvent(n,"mousemove",a,!1)},mousemove:function(e){e=o.getEvent(e);var r=n.currentTarget;({top:e.clientX,right:e.clientY+r.offsetWidth,down:e.clientX+r.offsetHeight,left:e.clientY}),r.nodeName.toLowerCase()==="b"?t.handlerMove.call(r,e,t):t.areaMove.call(r,e,t),o.stopEvent(e)},mouseup:function(e){e=o.getEvent(e);var r=o.getTarget(e);if(r.nodeName.toLowerCase()!=="b")try{}catch(e){}o.removeEvent(n,"mousemove",a,!1),o.removeEvent(n,"mouseup",a,!1),t.hanlderInfo=t.pos=t.origin=null,delete t.hanlderInfo,o.stopEvent(e)}})[e.type](e)},t.fn.checkHandler=function(e,t){e=o.getEvent(e);var n=o.getTarget(e),r=n.parentNode,a=o.getClinetRect(r);t.hanlderInfo={},t.hanlderInfo.mxT=0,t.hanlderInfo.mxL=0,t.hanlderInfo.mxR=r.parentNode.clientWidth+r.parentNode.scrollLeft-2,t.hanlderInfo.mxB=r.parentNode.clientHeight+r.parentNode.scrollTop-2,t.hanlderInfo.mxR=Math.max(t.hanlderInfo.mxR,t.hanlderInfo.mxL+60),t.hanlderInfo.mxB=Math.max(t.hanlderInfo.mxB,t.hanlderInfo.mxT+60),t.hanlderInfo.width=r.clientWidth,t.hanlderInfo.height=r.clientHeight,t.hanlderInfo.left=r.offsetLeft,t.hanlderInfo.top=r.offsetTop,t.hanlderInfo._left=a.left,t.hanlderInfo._right=a.right,t.hanlderInfo._top=a.top,t.hanlderInfo._down=a.bottom,t.hanlderInfo._fixLeft=t.hanlderInfo.width+t.hanlderInfo.left,t.hanlderInfo._fixTop=t.hanlderInfo.height+t.hanlderInfo.top,t.hanlderInfo._mxRW=t.hanlderInfo.mxR-t.hanlderInfo.left,t.hanlderInfo._mxDH=t.hanlderInfo.mxB-t.hanlderInfo.top,t.hanlderInfo._mxTH=Math.max(t.hanlderInfo._fixTop-t.hanlderInfo.mxT,0),t.hanlderInfo._mxLW=Math.max(t.hanlderInfo._fixLeft-t.hanlderInfo.mxL,0)},t.fn.correctX=function(e,t,n){e=n.correctWidth(e,t),n.hanlderInfo.width=e},t.fn.correctY=function(e,t,n){e=n.correctHeight(e,t),n.hanlderInfo.height=e},t.fn.correctWidth=function(e,t){return e=Math.min(t,e),e=Math.max(e,60,0)},t.fn.correctHeight=function(e,t){return e=Math.min(t,e),e=Math.max(e,60,0)},t.fn.correctTop=function(e){e.hanlderInfo.top=e.hanlderInfo._fixTop-e.hanlderInfo.height},t.fn.correctLeft=function(e){e.hanlderInfo.left=e.hanlderInfo._fixLeft-e.hanlderInfo.width},t.fn.handlerMove=function(e,t){e=o.getEvent(e),this.id,this.fn.size(e,t),t.resize(t),o.stopEvent(e)},t.fn.resize=function(e){var t=e.area;e.hanlderInfo&&(t.style.cssText="width:"+e.hanlderInfo.width+"px;height:"+e.hanlderInfo.height+"px;top:"+(e.hanlderInfo.top+1)+"px;left:"+(e.hanlderInfo.left+1)+"px")},t.fn.areaMove=function(e,t){if(this.parentNode){var n,r,a,i,l=[e.clientX,e.clientY],s=o.getClinetRect(this.parentNode);this.parentNode&&(n=this.parentNode,r=[n.offsetWidth,n.offsetHeight],t.origin||(t.origin=[]),a=Math.max(l[0]-s.left+n.scrollLeft-t.origin[0],0),a=Math.min(a,r[0]-this.offsetWidth),this.style.left=a+"px",i=Math.max(l[1]-s.top+n.scrollTop-t.origin[1],0),i=Math.min(i,r[1]-this.offsetHeight),this.style.top=i+"px")}},t.fn.removeArea=function(e){try{r.area.parentNode.removeChild(r.area),r.area=null}catch(t){}finally{"function"==typeof e&&e()}},t.fn.getData=function(){try{return[r.area.offsetLeft,r.area.offsetTop,r.area.offsetWidth,r.area.offsetHeight]}catch(e){}},t.fn.setProp=function(e,t){r.info.innerHTML="宽:"+Math.ceil(e)+"px&nbsp;&nbsp;高:"+Math.ceil(t)+"px&nbsp;&nbsp;比例:"+r.proportion(e,t)},t.fn.proportion=function(e,t){e=e.toPrecision(1),t=t.toPrecision(1);for(var n=t>e?e:t;;){if(0==e%n&&0==t%n)break;n--}return Math.abs(e/n)+":"+Math.abs(t/n)},void 0)};im.tk.addEvent(document,"DOMContentLoaded",function(){im.module.clip||(im.module.clip=e)},!1)}(window);