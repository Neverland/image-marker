window.imp||(imp={}),function(t,e,n){var i=function(){var e=arguments.callee,r=document,a=this;return Object.keys||(Object.keys=function(t){var e=[];for(e[e.length]in t);return e}),e.prototype={slice:[].slice,is:function(t){return{}.toString.call(t).slice(8,-1)},each:function(t,e){var i,r=0,a=t.length,o=a===n&&{}.toString.call(t).slice(8,-1)==="Object";if(o){for(i in t)if(e.call(t[i],i,t[i])===!1)break}else for(;a>r&&e.call(t[r],r,t[r++])!==!1;);},contains:function(t,e){try{return t.contains?t!=e&&t.contains(e):!!(t.compareDocumentPosition(e)&16)}catch(n){}},toArray:function(t){return a.slice.call(t)},getHtmlElement:function(t){var e=i;return e.element||(e.element={}),e.element[t]||(e.element[t]=r.createElement(t)),e.element[t].cloneNode(!0)},getEvent:function(e){return e||t.event},getTarget:function(t){return t.srcElement||t.target},currentStyle:function(t,e){return t.nodeType===1?n!==t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null)[e]:void 0},stopEvent:function(t){t.returnValue&&(t.returnValue=!1,t.cancelBubble=!1),t.preventDefault&&(t.preventDefault(),t.stopPropagation())},getOffsetXY:function(t){for(var e=0,n=0;t.offsetParent;)e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;return[e,n]},getViewportSize:function(){var e=[0,0];return e=n!==t.innerWidth?[t.innerWidth,t.innerHeight]:[document.documentElement.clientWidth,document.documentElement.clientHeight]},getClinetRect:function(t){var e=t.getBoundingClientRect(),n=n={left:e.left,right:e.right,top:e.top,bottom:e.bottom,height:e.height?e.height:e.bottom-e.top,width:e.width?e.width:e.right-e.left};return n},addEvent:function(t,e,n,i){var r=arguments.callee;t.attachEvent&&(r=function(t,e,n){t.attachEvent("on"+e,n)}).apply(t,arguments),t.addEventListener&&(r=function(t,e,n){t.addEventListener(e,n,i||!1)}).apply(t,arguments),t["on"+e]&&(r=function(t,e,n){t["on"+e]=function(){n()}}).apply(t,arguments)},removeEvent:function(t,e,n,i){var r=arguments.callee;t.detachEvent&&(r=function(t,e,n){t.detachEvent("on"+e,n)}).apply(t,arguments),t.removeEventListener&&(r=function(t,e,n){t.removeEventListener(e,n,i||!1)}).apply(t,arguments),t["on"+e]&&(r=function(t,e){t["on"+e]=null}).apply(t,arguments)},ready:function(t){var e;/^loade|c/.test(document.readyState)?e=setTimeout(function(){arguments.callee.apply(null,arguments)},50):e&&clearTimeout(e),setTimeout(t,1)},trigger:function(t,e){var i,r=document;n!==r.createEvent?(i=r.createEvent("MouseEvents"),i.initMouseEvent(e,!0,!0,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(i)):(i=r.createEventObject(),i.screenX=100,i.screenY=0,i.clientX=0,i.clientY=0,i.ctrlKey=!1,i.altKey=!1,i.shiftKey=!1,i.button=!1,t.fireEvent("on"+e,i))},getJSON:function(e,n,i,r){var a=document,o=a.createElement("script"),c=+new Date,s="abcdefghijk",l=Math.random().toFixed(1)*10,p=s[l]+c,r=r||"callback";e+=e.indexOf("?")>0?"":"?",this.is(n)==="Array"?this.is(n)==="Array"&&(e+=n.join(",")):this.each(n,function(t){e+=t+"="+n[t]+"&"}),e+=r+"="+p+"&",e+="timestamp="+c,"function"==typeof i&&(t[p]=function(){try{i.apply(this,arguments)}catch(e){throw new Error(e)}finally{if(t[p]=null,o.attributes.length>0)for(var n in o)try{o.removeAttribute(o[n])}catch(e){}o&&o.parentNode&&o.parentNode.removeChild(o)}}),o.setAttribute("type","text/javascript"),o.setAttribute("src",e),a.getElementsByTagName("head")[0].appendChild(o)}},t===this||"indicator"in this?new e:void 0}();imp.tk||(imp.tk=i)}(window,document),function(t,e,n){function i(t,i){var r,a=arguments.callee,o=this,c=imp.tk,s=e.body,l=i.width,p=i.height,d=0,f=0;return o.id=t,o.parent=null,r=a.prototype,r.constructor=a,r.init=function(){a.cache||(a.cache={}),o.fixedOffsetParent(i),o.data||(o.data={}),o.data._markPointData=[],o.data._markWordData=null,d=c.getClinetRect(i),f=c.getClinetRect(o.parent),o.image=o.parent.getElementsByTagName("img")[0],o.getImageOffsetXY(o.image),o.getPointsData.call(o,o.id),o.getInformatonData(o.id),a.tips||o.createTip();try{c.trigger(a.tips,"mouseleave")}catch(t){}},r.fixedOffsetParent=function(t){for(var e=t.offsetParent;c.currentStyle(e,"position")==="static";)e=e.offsetParent;o.parent=e},r.getPointsData=function(t){var e=this;return e.killArea(),e.data._markPointData.length>0?(e.parseData.call(e,e.data._markPointData),this):(e.getData("/im/pointlink/querypoint.ctrl",t,function(t){e._markPointData=t.data,e.parseData.call(e,t.data)}),this)},r.getInformatonData=function(t){var e=this;return e.killInfo(),e.getData("/im/decword/queryDecWord.ctrl",t,function(t){e._markWordData=t,e.parseInfoData.call(e,t[0])}),this},r.getData=function(t,e,n){imp.tk.getJSON(t,{id:e},function(t){t.state!="fail"&&"function"==typeof n&&n(t)})},r.parseData=function(t){var e=this;c.each(t,function(n,i){t&&e.createMarkArea.call(e,i,n)})},r.parseInfoData=function(t){t&&o.createInfoPreview(t.dw,t.pos)},r.clearInfomation=function(){try{a.preview.parentNode.removeChild(a.preview)}catch(t){}},r.getImageOffsetXY=function(t){var e=t.offsetParent;for(o.offsetXY=[0,0];c.currentStyle(e,"position")==="static";)e=e.offsetParent;o.offsetXY=[c.getClinetRect(t).left-c.getClinetRect(e).left,t.offsetTop]},r.createTip=function(){var t={tips:"div",wrap:"div",pointer:"div",pointerInner:"div",context:"dl",title:"dt",content:"dd",description:"p",link:"a"};return c.each(t,function(t,e){a[t]=c.getHtmlElement(e)}),a.link.innerHTML="更多&raquo;",a.link.style.display="none",a.link.target="_blank",a.pointer.className="markPointer",a.pointer.innerHTML="&nbsp;",a.pointerInner.className="mp_RT",a.wrap.className="markWrap",a.tips.className="markTips",a.tips.style.display="none",a.content.appendChild(a.description),a.content.appendChild(a.link),a.context.appendChild(a.title),a.context.appendChild(a.content),a.pointer.insertBefore(a.pointerInner,a.pointer.firstChild),a.wrap.appendChild(a.context),a.tips.appendChild(a.wrap),s.appendChild(a.tips),a.tips.onmouseleave=function(t){t=c.getEvent(t),c.stopEvent(t);var e=t.currentTarget,n=t.relatedTarget||t.toElement;return c.contains(e,n)||e===n||o.hide(t),!1},a.tips.onmouseenter=function(t){t=c.getEvent(t),c.stopEvent(t);var e=t.currentTarget,n=t.relatedTarget||t.fromElement;return c.contains(e,n)||e===n||o.show(t),!1},[a.tips,a.title,a.description,a.link]},r.createMarkArea=function(t,e){if(t&&t.axis){var n=t.axis.split(","),i=this;i.markArea=c.getHtmlElement("div"),i.markPoint=c.getHtmlElement("div"),i.markPoint.className="markPoint",i.markArea.className="markArea",i.markArea.data={},t.title&&(i.markArea.data.title=t.title),t.desc&&(i.markArea.data.desc=t.desc),i.markArea.data.pos=t.pos?t.pos:1,t.link&&(i.markArea.data.link=t.link),i.parent.appendChild(i.markArea),a.cache[i.id]||(a.cache[i.id]=[]),a.cache[i.id].push(i.markArea),i.markArea.style.cssText="width:"+n[2]+"px;height:"+ +n[3]+"px;top:"+(i.offsetXY[1]+ +n[1])+"px;left:"+(i.offsetXY[0]+ +n[0])+"px;z-index:"+(1e3+e)+";",i.markArea.onmouseenter=function(t){t=c.getEvent(t),c.stopEvent(t);var e=t.currentTarget,n=t.relatedTarget||t.fromElement;return c.contains(e,n)||e==n||i.show(t,i.id),!1},i.markArea.onmouseleave=function(t){t=c.getEvent(t),c.stopEvent(t);var e=t.currentTarget,n=t.relatedTarget||t.toElement;return c.contains(e,n)||e==n||i.hide(t,i.id),!1}}},r.createInfoPreview=function(t,e){t&&((o.parent.offsetHeight-p)/2+"px,",preview=c.getHtmlElement("em"),preview.innerHTML=t,preview.className="0"==e?"infoPreviewTop":"infoPreviewBottom",preview.style.cssText="display:block; width:"+(l-20)+"px;left:"+0+"px;"+(("0"==e?"top:0":"bottom:0")+"px;"),o.parent.appendChild(preview))},r.show=function(t,e){t=c.getEvent(t);var n=c.getTarget(t);a.delay&&clearTimeout(a.delay),o.togglePointer(t,e),o.display(n)},r.hide=function(t,e){t=c.getEvent(t),c.getTarget(t),a.delay=setTimeout(function(){a.tips.style.display="none"},200),o.togglePointer(t,e)},r.display=function(t){var e=t.data;t.data&&(a.description.removeAttribute("style"),a.link.removeAttribute("style"),a.title.innerHTML=e.title,n===e.desc?(a.description.style.display="none",a.description.innerHTML=""):(a.description.innerHTML=e.desc,a.description.style.display="block"),n===e.link?(a.link.style.display="none",a.link.href="javascript: void(0);"):a.link.href=e.link,o.rander(t))},r.rander=function(t){var e,n=c.getOffsetXY(t),i=0,r=0,s=0,l=0;a.tips.style.cssText="",a.pointer.style.width=0,a.tips.style.visibility="hidden",a.wrap.style.borderRadius=" 3px 3px 3px 0",a.tips.appendChild(a.pointer),a.tips.style.paddingBottom="0",a.pointerInner.className="mp_RT",a.tips.style.display="block",i=parseInt(n[0]+t.offsetWidth/2-9),r=parseInt(n[1]+t.offsetHeight/2-a.tips.offsetHeight+9),s=a.tips.offsetWidth,l=a.tips.offsetHeight,a.tips.style.cssText="top:"+r+"px;left:"+i+"px;height:"+l+"px;width:"+s+"px; overflow:hidden;z-index:2000;",a.pointer.style.width=a.tips.offsetWidth+"px",e=c.getClinetRect(a.tips),o.checkTipsPosition(e.top>0,c.getViewportSize()[0]-e.right>0,i,r,s,l)},r.checkTipsPosition=function(t,e,n,i,r,a){if(!t||!e){var c=t||e;t||o.correctTop(i,a,c),e||o.correctRight(n,r,c),c||o.correctTR()}},r.correctTop=function(t,e,n){a.tips.style.top=t+e-18+"px",a.tips.insertBefore(a.pointer,a.tips.children[0]),n&&(a.tips.style.paddingBottom="10px",a.wrap.style.borderRadius="0 3px 3px 3px",a.pointerInner.className="mp_RB")},r.correctRight=function(t,e,n){a.tips.style.left=t-e+18+"px",n&&(a.wrap.style.borderRadius="3px 3px 0 3px",a.pointerInner.className="mp_LT")},r.correctTR=function(){a.tips.style.paddingBottom="10px",a.wrap.style.borderRadius="3px 0 3px 3px",a.pointerInner.className="mp_LB"},r.togglePointer=function(t,e){t=c.getEvent(t);var n=t.type,e=e;return c.stopEvent(t),a.cache[e]&&c.each(a.cache[e],function(t,e){e.style.visibility="mouseover"===n||"mouseenter"===n?"visible":"hidden"}),!1},r.killInfo=function(t){for(var e=o.parent,n=o.parent.children,i=n.length>>>0;--i>0;)/infoPreviewTop|infoPreviewBottom/.test(n[i].className)&&e.removeChild(n[i]);t&&"function"==typeof t&&t()},r.killArea=function(t){var e,n=a.cache[o.id];if(n){for(;n.length;){e=n.pop();try{e.style.display="none",delete e.parentNode.removeChild(e)}catch(i){}}t&&"function"==typeof t&&t()}},this.init(),this}imp.IM||(imp.IM=i)}(window,document);